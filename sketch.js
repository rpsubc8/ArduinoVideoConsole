//const Uint8Array ima_disco_1bpp [2] = {1,2};


const ima_disco_1bpp=new Array( 64,40, 
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0xD9,0xD9,0x88,0xCA,0x8E,0xAB,0xAA,0xDF,
0xAA,0xAA,0xBB,0xBA,0xDE,0x9B,0x88,0xAF,
0xA9,0xBA,0x99,0xA8,0xDE,0x9B,0x88,0xAF,
0x8A,0xAA,0xBB,0xAA,0xDA,0xAB,0x88,0xAF,
0xA9,0xD9,0x8B,0xCA,0x8D,0xA8,0x8A,0xDF,
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0x9D,0x9C,0x8A,0xAA,0xAA,0x88,0xB8,0xFF,
0xAA,0xAB,0xDA,0xAA,0xAA,0xEB,0xBE,0xFF,
0xAA,0xAD,0xDA,0xA8,0xD8,0xDB,0xDE,0xFF,
0x98,0x9E,0xDA,0x88,0xAD,0xBB,0xEE,0xFF,
0xBC,0xA9,0xD8,0xDA,0xAD,0x88,0xE8,0xFF,
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0xDD,0x99,0xC8,0xC8,0xDD,0xFF,0xFF,0xFF,
0xA9,0xEE,0xAB,0xBE,0xAA,0xFF,0xFF,0xFF,
0xAD,0xDD,0xA9,0x9E,0xDC,0xFF,0xFF,0xFF,
0xAD,0xBE,0x8E,0xAD,0xAE,0xFF,0xFF,0xFF,
0xD8,0x89,0xE9,0xDD,0xDD,0xFF,0xFF,0xFF,
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0x9D,0x9C,0x8A,0xAA,0xAA,0x88,0xB8,0xFF,
0xAA,0xAB,0xDA,0xAA,0xAA,0xEB,0xBE,0xFF,
0xAA,0xAD,0xDA,0xA8,0xD8,0xDB,0xDE,0xFF,
0x98,0x9E,0xDA,0x88,0xAD,0xBB,0xEE,0xFF,
0xBC,0xA9,0xD8,0xDA,0xAD,0x88,0xE8,0xFF,
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0xD9,0xD9,0x88,0xCA,0x8E,0xAB,0xAA,0xDF,
0xAA,0xAA,0xBB,0xBA,0xDE,0x9B,0x88,0xAF,
0xA9,0xBA,0x99,0xA8,0xDE,0x9B,0x88,0xAF,
0x8A,0xAA,0xBB,0xAA,0xDA,0xAB,0x88,0xAF,
0xA9,0xD9,0x8B,0xCA,0x8D,0xA8,0x8A,0xDF,
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0xDD,0x99,0xC8,0xC8,0xDD,0xFF,0xFF,0xFF,
0xA9,0xEE,0xAB,0xBE,0xAA,0xFF,0xFF,0xFF,
0xAD,0xDD,0xA9,0x9E,0xDC,0xFF,0xFF,0xFF,
0xAD,0xBE,0x8E,0xAD,0xAE,0xFF,0xFF,0xFF,
0xD8,0x89,0xE9,0xDD,0xDD,0xFF,0xFF,0xFF,
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
);



/*const ima_disco_1bpp=new Array( 48,32, 
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
0xFF,0xFF,0xFC,0x1F,0xFF,0xFF,
0xFF,0xFF,0xF8,0x0F,0xFF,0xFF,
0xFF,0xFF,0xF0,0x07,0xFF,0xFF,
0xFF,0xFF,0xC0,0x01,0xFF,0xFF,
0xFF,0xFF,0x80,0x80,0xFF,0xFF,
0xFF,0xFF,0x01,0xC0,0x7F,0xFF,
0xFF,0xFC,0x06,0x30,0x1F,0xFF,
0xFF,0xF8,0x0C,0x18,0x0F,0xFF,
0xFF,0xF0,0x18,0x0C,0x07,0xFF,
0xFF,0xC0,0x60,0x03,0x01,0xFF,
0xFF,0x80,0xC0,0x01,0x80,0xFF,
0xFF,0x01,0x80,0x01,0xC0,0x7F,
0xFC,0x06,0x00,0x00,0x30,0x1F,
0xF8,0x0C,0x00,0x00,0x18,0x0F,
0xF0,0x18,0x00,0x00,0x0C,0x07,
0xC0,0x60,0x00,0x00,0x03,0x01,
0x80,0xC0,0x00,0x00,0x01,0x80,
0x81,0x80,0x00,0x00,0x00,0xC0,
0xEF,0x80,0x00,0x00,0x00,0xFB,
0xFF,0x80,0x00,0x00,0x00,0xFF,
0xFF,0x80,0x07,0xF0,0x00,0xFF,
0xFF,0x80,0x07,0xF0,0x00,0xFF,
0xFF,0x80,0x07,0xF0,0x00,0xFF,
0xFF,0x80,0x07,0xF0,0x00,0xFF,
0xFF,0x80,0x07,0xF0,0x00,0xFF,
0xFF,0x80,0x07,0xF0,0x00,0xFF,
0xFF,0x80,0x07,0xF0,0x00,0xFF,
0xFF,0x80,0x07,0xF0,0x00,0xFF,
0xFF,0xF5,0xB7,0xF3,0xFF,0xFF,
0xFF,0xFF,0xFF,0xFF,0xFF,0xFF
 );*/
 
const ancho_screen=84;
const alto_screen=48;
//var screen = new Uint8Array((ancho_screen*alto_screen*2)/8);
var screen = new Array((ancho_screen*alto_screen*2)/8);
//var screen_real = new Uint8Array((ancho*alto)); //buffer pantalla real1
//var buffer = new ArrayBuffer(8);


function byteString(n) {
  if (n < 0 || n > 255 || n % 1 !== 0) {
      throw new Error(n + ' does not fit in a byte');
  }
  return ('000000000' + n.toString(2)).substr(-8);
}

function Put_Imagen1to2(imagen)
{
 var ancho= ((ima_disco_1bpp[0])>>3);
 //console.log(ancho);
 var alto= ima_disco_1bpp[1];
 //console.log(alto);
 var cont_imagen=2;
 var cont_destino=0;
 var aux;
 var aux_destino; 
 var tope = ancho*alto; 
 var linea_screen=0;

 //var cad=''; 
 
 for (var i=0;i<tope;i++)
 {
  aux= ima_disco_1bpp[i+cont_imagen];
  //cad=cad+'|'+byteString(aux);
  //cad=cad+byteString(aux);
  if ((aux&0x10)==0x10) aux_destino=0x03; else aux_destino=0; 
  if ((aux&0x20)==0x20) aux_destino|=0x0C;
  if ((aux&0x40)==0x40) aux_destino|=0x30;
  if ((aux&0x80)==0x80) aux_destino|=0xC0;
  screen[cont_destino]=aux_destino;
  cont_destino++;
  if ((aux&0x01)==0x01) aux_destino=0x03; else aux_destino=0;
  if ((aux&0x02)==0x02) aux_destino|=0x0C;
  if ((aux&0x04)==0x04) aux_destino|=0x30;
  if ((aux&0x08)==0x08) aux_destino|=0xC0;  
  screen[cont_destino]=aux_destino;  
  cont_destino++;
  if (((i+1)%ancho==0)&&(i>0)){
   linea_screen++;
   cont_destino=(linea_screen*21);
   //cad+='\n';
  }
 }
 
 /*cad='';
 for (var i=0;i<(ancho_screen*alto_screen*2/8);i++)
 {
  //cad+='|'+byteString(screen[i]);    
  cad+=byteString(screen[i]);    
  if (((i+1)%21==0)&&(i>0)){
	  cad+='\n';
  }
 }*/
 //console.log(cad);
}


function PaintPantallaReal(){
 var tope= ancho_screen*alto_screen*2/8; //1008
 var aux=0;
 var aux_destino=0;
 var x_ini=10;
 var y_ini=10;  
 var x_destino=0;
 var y_destino=0;
 //var cad='';
 strokeWeight(3);
 for (var i=0;i<tope;i++)
 {
  aux=screen[i];
  if ((aux&0xC0)==0xC0){aux_destino=0xFF;}else{aux_destino=0;}  
  //console.log(aux_destino);    
  stroke(aux_destino,aux_destino,aux_destino);
  //point(x_destino+x_ini,y_destino+y_ini);
  rect(x_destino+x_ini,y_destino+y_ini,0,0);  
  x_destino+=4;
  //cad=cad+byteString(aux_destino);
  if ((aux&0x30)==0x30){aux_destino=0xFF;}else{aux_destino=0;}    
  //point(x_destino+x_ini,y_destino+y_ini);
  stroke(aux_destino,aux_destino,aux_destino);
  rect(x_destino+x_ini,y_destino+y_ini,0,0);  
  x_destino+=4;  
  //cad=cad+byteString(aux_destino);
  //console.log(aux_destino);
  if ((aux&0x0C)==0x0C){aux_destino=0xFF;}else{aux_destino=0;}
  stroke(aux_destino,aux_destino,aux_destino);
  //point(x_destino+x_ini,y_destino+y_ini);  
  rect(x_destino+x_ini,y_destino+y_ini,0,0);  
  x_destino+=4;  
  //cad=cad+byteString(aux_destino);
  if ((aux&0x03)==0x03){aux_destino=0xFF;}else{aux_destino=0;}  
  stroke(aux_destino,aux_destino,aux_destino);
  rect(x_destino+x_ini,y_destino+y_ini,0,0);  
  x_destino+=4;
  //cad=cad+byteString(aux_destino);
  
  if (((i+1)%21==0)&&(i>0)){     
   x_destino=0;
   y_destino+=4;
   //cad+='\n';
  }
 }
 //console.log(cad);
 
/* var cad;
 //console.log(tope);
 for (i=0;i<tope;i++)
 {
	 cad+=screen[i]+"|";
 }
 //console.log(cad);*/
	 
}

/*function Prueba(){
 screen[0]=0xF0;
 screen[1]=0;
 screen[2]=0xFF;
 screen[3]=0;
 screen[4]=0xFF;
}*/

function ClearScreen(){
 var tope= ancho_screen*alto_screen*2/8; //1008
 for (var i=0;i<tope;i++)
 {
	 screen[i]=0;
 }
}

function setup() {
  //createCanvas(710, 400);
  createCanvas(displayWidth, displayHeight);  
}

function draw() {
  background(200);

  fill(127);
  stroke(0);
  
  ClearScreen();
  //Prueba();
  Put_Imagen1to2(ima_disco_1bpp);
  PaintPantallaReal();
}